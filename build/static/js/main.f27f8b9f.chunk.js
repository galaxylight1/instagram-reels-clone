(this["webpackJsonpreels-app"]=this["webpackJsonpreels-app"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(13),i=a.n(s),o=(a(100),a(101),a(22)),c=a.n(o),l=a(35),u=a(14),m=a(50);a(103),a(118),a(119);m.a.initializeApp({apiKey:"AIzaSyA5YL4WG3KTdCgPB9GYyU47DyEH8qcaU3Q",authDomain:"reels-37681.firebaseapp.com",projectId:"reels-37681",storageBucket:"reels-37681.appspot.com",messagingSenderId:"442429481994",appId:"1:442429481994:web:86426912b2f4320c3fabf3"});var d=m.a.auth(),p=m.a.firestore(),j={users:p.collection("users"),posts:p.collection("posts"),getCurrentTimeStamp:m.a.firestore.FieldValue.serverTimestamp},b=m.a.storage(),g=a(3),f=r.a.createContext();var h=function(e){var t=e.children,a=Object(n.useState)(),r=Object(u.a)(a,2),s=r[0],i=r[1],o=Object(n.useState)(!0),c=Object(u.a)(o,2),l=c[0],m=c[1];Object(n.useEffect)((function(){var e=d.onAuthStateChanged((function(e){i(e),m(!1)}));return function(){e()}}),[]);var p={currentUser:s,login:function(e,t){return d.signInWithEmailAndPassword(e,t)},signup:function(e,t){return d.createUserWithEmailAndPassword(e,t)},logout:function(){return d.signOut()}};return Object(g.jsx)(f.Provider,{value:p,children:!l&&t})},O=a(163),x=a(166),v=a(170),w=a(168),y=a(169),S=a(177),N=Object(O.a)({root:{minWidth:275,width:310,position:"absolute",top:"6.2rem",left:"47rem",padding:"9px"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},field:{marginLeft:"2.5rem",marginTop:"0.5rem"},btn:{marginLeft:"5.7rem",marginTop:"2rem"},logo:{marginLeft:"4.9rem",marginBottom:"0.5rem"},fileUpload:{marginLeft:"3.5rem",marginTop:"1.5rem"}});function _(e){var t=e.name,a=e.email,n=e.password,r=e.file,s=e.signup,i=N();i.bullet;return Object(g.jsxs)(x.a,{className:i.root,variant:"outlined",children:[Object(g.jsxs)(w.a,{children:[Object(g.jsx)("img",{className:i.logo,src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png"}),Object(g.jsx)(S.a,{className:i.field,id:"standard-basic",label:"Username",onChange:function(e){return t(e.target.value)}}),Object(g.jsx)(S.a,{className:i.field,id:"standard-basic",label:"Email",onChange:function(e){return a(e.target.value)}}),Object(g.jsx)(S.a,{className:i.field,id:"standard-basic",label:"Password",type:"password",onChange:function(e){return n(e.target.value)}}),Object(g.jsxs)(y.a,{className:i.fileUpload,variant:"contained",color:"secondary",component:"label",children:["Profile Photo",Object(g.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:r})]})]}),Object(g.jsx)(v.a,{children:Object(g.jsx)(y.a,{className:i.btn,variant:"outlined",color:"primary",onClick:s,children:"Sign Up"})})]})}var T=a(49),L=a.n(T),C=a(15),I=0;var U=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),i=Object(u.a)(s,2),o=i[0],m=i[1],d=Object(n.useState)(""),p=Object(u.a)(d,2),h=p[0],O=p[1],x=Object(n.useState)(""),v=Object(u.a)(x,2),w=(v[0],v[1]),y=Object(n.useState)(!1),S=Object(u.a)(y,2),N=(S[0],S[1]),T=Object(n.useState)(null),U=Object(u.a)(T,2),k=U[0],E=U[1],B=Object(n.useState)(null),D=Object(u.a)(B,2),z=(D[0],D[1]),F=Object(C.g)(),P=Object(n.useContext)(f).signup,R=function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r,s,i,u,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done")},r=function(e){w(e),setTimeout((function(){w("")}),2e3),N(!1)},s=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.snapshot.ref.getDownloadURL();case 2:return t=e.sent,console.log(t),e.next=6,j.users.doc(u).set({email:a,userId:u,username:h,createdAt:j.getCurrentTimeStamp(),profileUrl:t,postIds:[]});case 6:F.push("/");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N(!0),e.next=8,P(a,o);case 8:i=e.sent,u=i.user.uid,(m=b.ref("/users/".concat(u,"/profileImage")).put(k)).on("state_changed",n,r,s),N(!1),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(1),w(e.t0),setTimeout((function(){return w("")}),2e3),N(!1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){for(var e=document.getElementsByClassName("mySlides"),t=0;t<e.length;t++)e[t].style.display="none",e[t].classList.remove(L.a.enlighten);e[I].style.display="block",e[I].classList.add(L.a.enlighten),++I==e.length&&(I=0)};return Object(n.useEffect)((function(){var e=setInterval(A,4e3);return z(e),function(){clearInterval(e)}}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("img",{style:{marginLeft:"20rem",marginTop:"5rem",height:"70vh"},src:"https://static.wixstatic.com/media/5e9072_d5f413e750dc4d84a1c8650a354ced41~mv2.png/v1/fill/w_314,h_634,al_c,q_85,usm_0.66_1.00_0.01/googlepixel4%20(1).webp"}),Object(g.jsx)("img",{className:"mySlides",style:{position:"absolute",left:"18.5rem",top:"9rem",height:"60vh",borderRadius:"30px",boxShadow:"0px 3px 5px #333"},src:"https://www.instagram.com/static/images/homepage/screenshot5.jpg/0a2d3016f375.jpg"}),Object(g.jsx)("img",{className:"mySlides",style:{position:"absolute",left:"18.5rem",top:"9rem",height:"60vh",borderRadius:"30px",boxShadow:"0px 3px 5px #333"},src:"https://www.instagram.com/static/images/homepage/screenshot4.jpg/842fe5699220.jpg"}),Object(g.jsx)("img",{className:"mySlides",style:{position:"absolute",left:"18.5rem",top:"9rem",height:"60vh",borderRadius:"30px",boxShadow:"0px 3px 5px #333"},src:"https://www.instagram.com/static/images/homepage/screenshot1.jpg/d6bf0c928b5a.jpg"}),Object(g.jsx)(_,{name:O,email:r,password:m,file:function(e){var t=e.target.files[0];console.log(t),null!=t&&E(t)},signup:R})]})},k=Object(O.a)({root:{minWidth:275,width:310,position:"absolute",top:"6.2rem",left:"47rem",padding:"9px"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},field:{marginLeft:"2.5rem",marginTop:"0.5rem"},loginBtn:{marginLeft:"3.4rem",marginTop:"2rem"},signUpBtn:{marginLeft:"8.5rem",marginTop:"2rem"},logo:{marginLeft:"4.9rem",marginBottom:"0.5rem"},fileUpload:{marginLeft:"3.5rem",marginTop:"1.5rem"},errorMsg:{fontSize:"10.5px",color:"red",marginLeft:"6.90rem",marginTop:"0.5rem",width:"4.5rem",height:"0.5rem"}});function E(e){var t=e.name,a=e.password,n=e.login,r=e.error,s=k(),i=Object(C.g)();return Object(g.jsxs)(x.a,{className:s.root,variant:"outlined",children:[Object(g.jsxs)(w.a,{children:[Object(g.jsx)("img",{className:s.logo,src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png"}),Object(g.jsx)(S.a,{className:s.field,id:"standard-basic",label:"Username",onChange:function(e){return t(e.target.value)}}),Object(g.jsx)(S.a,{className:s.field,id:"standard-basic",label:"Password",type:"password",onChange:function(e){return a(e.target.value)}})]}),r?Object(g.jsx)("div",{className:s.errorMsg,children:r}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:s.errorMsg})}),Object(g.jsxs)(v.a,{children:[Object(g.jsx)(y.a,{className:s.loginBtn,variant:"outlined",color:"primary",onClick:n,children:"Login"}),Object(g.jsx)(y.a,{className:s.signUpBtn,variant:"contained",color:"secondary",onClick:function(){return i.push("/signup")},children:"Sign Up"})]})]})}var B=0;var D=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],r=(t[1],Object(n.useState)("")),s=Object(u.a)(r,2),i=s[0],o=s[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),p=(d[0],d[1]),j=Object(n.useState)(""),b=Object(u.a)(j,2),h=b[0],O=b[1],x=Object(n.useState)(!1),v=Object(u.a)(x,2),w=(v[0],v[1]),y=Object(C.g)(),S=Object(n.useContext)(f),N=S.login,_=S.currentUser,T=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,console.log("Logging in user"),w(!0),e.next=6,N(a,i);case 6:w(!1),y.push("/"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),O("Failed to login!"),setTimeout((function(){return O("")}),2e3),w(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),I=function e(){for(var t=document.getElementsByClassName("mySlides"),a=0;a<t.length;a++)t[a].style.display="none",t[a].classList.remove(L.a.enlighten);t[B].style.display="block",t[B].classList.add(L.a.enlighten),++B==t.length&&(B=0),setTimeout(e,4e3)};return Object(n.useEffect)((function(){_?y.push("/"):I()}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("img",{style:{marginLeft:"20rem",marginTop:"5rem",height:"70vh"},src:"https://static.wixstatic.com/media/5e9072_d5f413e750dc4d84a1c8650a354ced41~mv2.png/v1/fill/w_314,h_634,al_c,q_85,usm_0.66_1.00_0.01/googlepixel4%20(1).webp"}),Object(g.jsx)("img",{className:"mySlides",style:{position:"absolute",left:"18.5rem",top:"9rem",height:"60vh",borderRadius:"30px",boxShadow:"0px 3px 5px #333"},src:"https://www.instagram.com/static/images/homepage/screenshot5.jpg/0a2d3016f375.jpg"}),Object(g.jsx)("img",{className:"mySlides",style:{position:"absolute",left:"18.5rem",top:"9rem",height:"60vh",borderRadius:"30px",boxShadow:"0px 3px 5px #333"},src:"https://www.instagram.com/static/images/homepage/screenshot4.jpg/842fe5699220.jpg"}),Object(g.jsx)("img",{className:"mySlides",style:{position:"absolute",left:"18.5rem",top:"9rem",height:"60vh",borderRadius:"30px",boxShadow:"0px 3px 5px #333"},src:"https://www.instagram.com/static/images/homepage/screenshot1.jpg/d6bf0c928b5a.jpg"}),Object(g.jsx)(E,{name:p,password:o,login:T,error:h})]})},z=a(171),F=a(172),P=a(173),R=a(179),A=a(85),M=Object(O.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{marginRight:"84vw"},appb:{backgroundColor:"white"},icon:{width:"35px",height:"35px",borderRadius:"50%"}}}));function W(e){var t=e.userData,a=M(),n=r.a.useState(null),s=Object(u.a)(n,2),i=s[0],o=s[1],c=Boolean(i),l=function(){o(null)};return Object(g.jsx)("div",{className:a.root,children:Object(g.jsx)(z.a,{className:a.appb,position:"fixed",children:Object(g.jsxs)(F.a,{children:[Object(g.jsx)("img",{className:a.title,src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png"}),Object(g.jsxs)("div",{children:[Object(g.jsx)(P.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit",children:Object(g.jsx)("img",{className:a.icon,src:t.profileUrl})}),Object(g.jsxs)(A.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:l,children:[Object(g.jsx)(R.a,{onClick:l,children:"Profile"}),Object(g.jsx)(R.a,{onClick:l,children:"Logout"})]})]})]})})})}var q=a(174),V=(a.p,a(82)),G=a.n(V),Q=a(83),J=a.n(Q),K=a(84),Y=a.n(K),H=a(180),X=Object(O.a)({root:{marginLeft:"28.3rem",marginTop:"5vh",marginBottom:"20vh",width:"30%",height:"30%"},media:{width:"100%"},label:{position:"absolute",left:"1rem",bottom:"1.85rem"},actionLabel:{position:"absolute",right:"0.1rem",bottom:"1.9rem"}});function Z(e){var t=e.source,a=(e.id,e.name),n=e.avatar,r=X();return Object(g.jsx)(x.a,{className:r.root,children:Object(g.jsxs)(q.a,{children:[Object(g.jsx)("video",{onEnded:function(e){var t=e.target.parentElement.parentElement.parentElement.nextSibling;null!=t&&(t.scrollIntoView({behavior:"smooth"}),e.target.muted=!0)},className:G.a.vs,src:t,muted:!0,onClick:function(e){e.preventDefault(),e.target.muted=!e.target.muted}}),Object(g.jsxs)("div",{className:r.label,style:{display:"flex",borderBottom:"1px gray",alignItems:"center"},children:[Object(g.jsx)(H.a,{src:n,style:{width:"30px",height:"30px"}}),Object(g.jsx)("div",{style:{marginLeft:"1rem",color:"white",fontSize:"14px"},children:a})]}),Object(g.jsxs)("div",{className:r.actionLabel,children:[Object(g.jsx)(y.a,{size:"small",color:"primary",children:Object(g.jsx)(J.a,{style:{color:"white",opacity:"0.7",zIndex:"3"}})}),Object(g.jsx)(y.a,{size:"small",color:"primary",children:Object(g.jsx)(Y.a,{style:{color:"white",opacity:"0.7",zIndex:"3"}})})]})]})})}var $=a(176),ee=a(38),te=a(86),ae=a(74),ne=a.n(ae),re=a(175),se=a(178);var ie=function(e){var t,a,r=Object(n.useState)(!1),s=Object(u.a)(r,2),i=s[0],o=s[1],m=Object(n.useState)(null),d=Object(u.a)(m,2),p=d[0],f=d[1],h=["video/mp4","video/webm","video/ogg"];return Object(g.jsx)(g.Fragment,{children:null!=p?Object(g.jsx)(y.a,(t={disabled:!0,variant:"outlined",component:"span",style:{marginTop:"5.5rem",marginLeft:"19rem",marginBottom:"1rem"},size:"medium",color:"secondary",startIcon:Object(g.jsx)(ne.a,{})},Object(ee.a)(t,"size","small"),Object(ee.a)(t,"children",p),t)):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("input",{color:"primary",type:"file",id:"icon-button-file",onChange:function(t){var a,n=null===t||void 0===t||null===(a=t.target)||void 0===a?void 0:a.files[0];if(!n)return f("Please select a file!"),void setTimeout((function(){return f(null)}),2e3);if(-1==h.indexOf(n.type))return f("Please select a video file!"),void setTimeout((function(){return f(null)}),2e3);if(n.size/1048576>100)return f("The selected file is too big!"),void setTimeout((function(){return f(null)}),2e3);var r=Object(se.a)(),s=b.ref("/posts/".concat(e.userData.userId,"/").concat(n.name)).put(n);function i(){return(i=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o(!0),s.snapshot.ref.getDownloadURL().then((function(t){var a,n,s,i={comments:[],likes:[],pId:r,pUrl:t,uName:null===e||void 0===e||null===(a=e.userData)||void 0===a?void 0:a.username,uProfile:null===e||void 0===e||null===(n=e.userData)||void 0===n?void 0:n.profileUrl,userId:null===e||void 0===e||null===(s=e.userData)||void 0===s?void 0:s.userId,createdAt:j.getCurrentTimeStamp()};j.posts.add(i).then(function(){var t=Object(l.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.id,t.next=3,j.users.doc(e.userData.userId).update({postIds:[].concat(Object(te.a)(e.userData.postIds),[a.id])});case 3:t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){o(!1)})).catch((function(e){f(e),setTimeout((function(){return f(null)}),2e3),o(!1)}))}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done")}),(function(e){f(e),setTimeout((function(){f(null)}),2e3),o(!1)}),(function(){return i.apply(this,arguments)}))},style:{display:"none"}}),Object(g.jsx)("label",{htmlFor:"icon-button-file",children:Object(g.jsx)(y.a,(a={disabled:i,variant:"outlined",component:"span",style:{marginTop:"5.5rem",marginLeft:"70rem",marginBottom:"1rem",position:"absolute"},size:"medium",color:"secondary",startIcon:Object(g.jsx)(ne.a,{})},Object(ee.a)(a,"size","small"),Object(ee.a)(a,"children","Upload Video"),a))}),i?Object(g.jsx)(re.a,{color:"secondary",style:{width:"100%",height:"0.2rem",zIndex:"3",position:"absolute",top:"4rem"}}):Object(g.jsx)(g.Fragment,{})]})})},oe=(a(112),a(113),a(39)),ce=Object(O.a)({root:{},loader:{position:"absolute",top:"50%",left:"47%"}});var le=function(e){e.userData;var t=ce(),a=Object(n.useState)(null),s=Object(u.a)(a,2),i=s[0],o=s[1],c=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.target.children[0].children[0].children[0];1==e.isIntersecting?t.play():t.pause()}))}),{threshold:.85});return Object(n.useEffect)((function(){var e=[];return j.posts.orderBy("createdAt","desc").onSnapshot((function(t){e=[],t.forEach((function(t){var a=Object(oe.a)(Object(oe.a)({},t.data()),{},{postId:t.id});e.push(a)})),o(e)}))}),[]),Object(n.useEffect)((function(){return document.querySelectorAll(".video").forEach((function(e){c.observe(e)})),function(){c.disconnect()}}),[i]),Object(g.jsx)(g.Fragment,{children:null==i?Object(g.jsx)($.a,{className:t.loader,color:"secondary"}):Object(g.jsx)("div",{className:"video-container",id:"video-container",children:i.map((function(e,t){return Object(g.jsx)(r.a.Fragment,{children:Object(g.jsx)("div",{className:"video",children:Object(g.jsx)(Z,{source:e.pUrl,id:e.pId,name:e.uName,avatar:e.uProfile})})},t)}))})})},ue=Object(O.a)((function(){return{root:{},progress:{marginLeft:"47%",marginTop:"15%"}}}));var me=function(){var e=ue(),t=Object(n.useContext)(f).currentUser,a=Object(n.useState)(null),r=Object(u.a)(a,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){j.users.doc(t.uid).onSnapshot((function(e){i(e.data())}))}),[t]),Object(g.jsx)(g.Fragment,{children:null==s?Object(g.jsx)($.a,{className:e.progress}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(W,{userData:s}),Object(g.jsx)("div",{className:"example",children:Object(g.jsxs)("div",{className:"feed-container",children:[Object(g.jsx)(ie,{userData:s}),Object(g.jsx)(le,{userData:s})]})})]})})},de=a(87),pe=["component"];var je=function(e){var t=e.component,a=Object(de.a)(e,pe),r=Object(n.useContext)(f).currentUser;return Object(g.jsx)(C.b,Object(oe.a)(Object(oe.a)({},a),{},{render:function(e){return r?Object(g.jsx)(t,Object(oe.a)({},e)):Object(g.jsx)(C.a,{to:"/login"})}}))},be=a(40);var ge=function(){return Object(g.jsx)(be.a,{children:Object(g.jsx)(h,{children:Object(g.jsxs)(C.d,{children:[Object(g.jsx)(je,{exact:!0,path:"/",component:me}),Object(g.jsx)(C.b,{path:"/login",component:D}),Object(g.jsx)(C.b,{path:"/signup",component:U})]})})})};i.a.render(Object(g.jsx)(ge,{}),document.getElementById("root"))},49:function(e,t,a){e.exports={enlighten:"Login_enlighten__1VEkQ",enlighten_animation:"Login_enlighten_animation__3ocQj"}},82:function(e,t,a){e.exports={vs:"Cards_vs__3DEfM"}}},[[116,1,2]]]);
//# sourceMappingURL=main.f27f8b9f.chunk.js.map